<div class="container-fluid">
    <h1>nines</h1>
    <div id="content">
        <h2>Response Stats</h2>

        <!---------------------------------------------------------------------
         Form for Adding URL Groups
        ---------------------------------------------------------------------->
        <div id="manageUrlGroups" ng-controller="uiMainUrlGroupsCtrl">
            <div class="btn-group" role="group" aria-label="actions for managing URL Groups">
                <button type="button" class="btn btn-large btn-primary"
                        ng-click="showAddUrlGroupForm()">
                    Add URL Group
                </button>
            </div>

            <div id="add-url-group-form" ng-show="showFormAddUrlGroup">
                <h3>Add new URL Group</h3>
                <form name="add-url-group">
                    <div class="form-group">
                        <label for="url-group-name">URL Group Name</label>
                        <input type="text" class="form-control" id="url-group-name"
                               ng-model="newUrlGroup.name" name="url-group-name">
                    </div>
                    <div class="form-alert">
                        <alert ng-show="addUrlGroupFormMessage">{{addUrlGroupFormMessage}}</alert>
                    </div>
                    <button type="submit" class="btn btn-large btn-primary"
                            ng-click="addUrlGroup(newUrlGroup)">
                        Add
                    </button>
                    <button class="btn btn-large btn-default" ng-click="hideAddUrlGroupForm()">
                        Cancel
                    </button>
                </form>
            </div>
        </div>

        <!---------------------------------------------------------------------
         Main Display of Groups, URLs, and Ratings
        ---------------------------------------------------------------------->
        <div ng-repeat="urlgroup in urlgroups">
            <table class="table table-striped table-condensed table-responsive">
                <h3>{{urlgroup.name}}</h3>
                {{showIconsRemoveUrl}} and {{urlgroup._id}}
                <thead>
                    <th ng-show="showIconsRemoveUrl === urlgroup._id">Remove</th>
                    <th>Name</th>
                    <th>URL</th>
                    <th ng-repeat="(statusCode, count) in urlgroup.responses">
                        {{statusCode}}
                    </th>
                    <th colspan="{{numDigits + 1}}">Availability Rating (%)</th>
                </thead>
                <tbody>
                    <tr ng-repeat="url in urls |
                                   filter : { urlgroup_id: urlgroup._id } |
                                   orderBy: 'name'">
                        <td ng-show="showIconsRemoveUrl === urlgroup._id">
                            <a type="button" class="btn btn-small btn-danger">x</a>
                        </td>
                        <td>{{url.name}}</td>
                        <td><a href="http://{{url.host}}{{url.path}}" target="_blank">
                            {{url.host}}{{url.path}}</a>
                        </td>

                        <td ng-repeat="stat in getUrlStats(urlgroup.responses, url.responses)">
                            {{stat}}
                        </td>

                    </tr>
                    <tr class="url-group-total-row">
                        <td colspan="2">Group Total:</td>
                        <td ng-repeat="stat in getUrlStats(urlgroup.responses)">
                            {{stat}}
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-----------------------------------------------------------------
             Form for Adding URLs
            ------------------------------------------------------------------>
            <div id="manageUrls" ng-controller="uiMainUrlsCtrl">
                <div class="btn-group" role="group" aria-label="actions for managing URLs">
                    <button type="button" class="btn btn-primary"
                            ng-click="showAddUrlForm(urlgroup._id)">
                        Add URL
                    </button>
                    <button type="button" class="btn btn-danger"
                            ng-click="showRemoveUrlIcons(urlgroup._id)">
                        Remove URLs
                    </button>
                </div>
                <div id="add-url-form" ng-show="showFormAddUrl === urlgroup._id">
                    <h3>Add new URL</h3>
                    <form name="add-url">
                        <div class="form-group">
                            <label for="url-name">URL Name</label>
                            <input type="text" class="form-control" id="url-name"
                                   ng-model="newUrl.name" name="url-name">
                            <label for="url-host">URL Host</label>
                            <input type="text" class="form-control" id="url-host"
                                   ng-model="newUrl.host" name="url-host">
                            <label for="url-path">URL Path</label>
                            <input type="text" class="form-control" id="url-path"
                                   ng-model="newUrl.path" name="url-path">
                            <label for="url-protocol-choice-buttons">Protocol</label>
                            <div id="url-protocol-choice-buttons">
                                <label class="radio-inline">
                                    <input type="radio" name="urlProtocolOptions"
                                           id="urlProtocolHttp" value="http"
                                           ng-model="newUrl.protocol">
                                    HTTP
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="urlProtocolOptions"
                                           id="urlProtocolHttps" value="https"
                                           ng-model="newUrl.protocol">
                                    HTTPS
                                </label>
                            </div>
                        </div>
                        <div class="form-alert">
                            <alert ng-show="addUrlFormMessage">{{addUrlFormMessage}}</alert>
                        </div>
                        <button type="submit" class="btn btn-large btn-primary"
                                ng-click="addUrl(newUrl, urlgroup._id)">
                            Add
                        </button>
                        <button class="btn btn-large btn-default" ng-click="hideAddUrlForm()">
                            Cancel
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
